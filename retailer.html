<!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healmate | Your Mental Wellness Companion</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid #e2e8f0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background-color: #3b82f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
        }

        .logo-text h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 28px;
            font-weight: 700;
            color: #1e293b;
            letter-spacing: -0.5px;
        }

        .logo-text p {
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: #3b82f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: 600;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* Main Layout */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }

        /* Camera Section */
        .camera-section {
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 25px;
            display: flex;
            flex-direction: column;
            height: 100%;
            transition: transform 0.3s ease;
        }

        .camera-section:hover {
            transform: translateY(-5px);
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .section-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background-color: #3b82f6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .section-title h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 22px;
            color: #1e293b;
            font-weight: 600;
        }

        .camera-container {
            width: 100%;
            height: 300px;
            border-radius: 12px;
            overflow: hidden;
            background-color: #1e293b;
            position: relative;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
        }

        #camera-feed {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .camera-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            background-color: rgba(30, 41, 59, 0.9);
            color: white;
            gap: 10px;
        }

        .camera-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .mood-display {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 18px;
            background-color: #f8fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }

        .mood-emoji {
            font-size: 24px;
        }

        .mood-text {
            font-weight: 600;
            color: #1e293b;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .btn-primary {
            background-color: #3b82f6;
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
        }

        .btn-primary:hover {
            background-color: #2563eb;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: #ef4444;
            color: white;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.25);
        }

        .btn-secondary:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Chatbot Section */
        .chatbot-section {
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 25px;
            display: flex;
            flex-direction: column;
            height: 100%;
            transition: transform 0.3s ease;
        }

        .chatbot-section:hover {
            transform: translateY(-5px);
        }

        .chatbot-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .chatbot-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #10b981;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
            position: relative;
        }

        .chatbot-avatar::after {
            content: '';
            position: absolute;
            bottom: 2px;
            right: 2px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #10b981;
            border: 2px solid white;
        }

        .chatbot-info h3 {
            font-family: 'Poppins', sans-serif;
            font-size: 20px;
            color: #1e293b;
            font-weight: 600;
        }

        .chatbot-info p {
            color: #64748b;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .voice-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 10px 15px;
            background-color: #f8fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }

        .voice-btn {
            padding: 8px 16px;
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .voice-btn:hover {
            background-color: #2563eb;
        }

        .voice-btn.recording {
            background-color: #ef4444;
            animation: pulse 1.5s infinite;
        }

        .voice-status {
            font-size: 13px;
            color: #64748b;
        }

        .chatbot-conversation {
            flex-grow: 1;
            height: 250px;
            overflow-y: auto;
            padding: 20px;
            background-color: #f8fafc;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            border: 1px solid #e2e8f0;
        }

        .message {
            max-width: 80%;
            padding: 15px 18px;
            border-radius: 18px;
            line-height: 1.5;
            animation: fadeIn 0.3s ease;
            position: relative;
        }

        .bot-message {
            align-self: flex-start;
            background-color: white;
            color: #1e293b;
            border: 1px solid #e2e8f0;
            border-top-left-radius: 5px;
        }

        .user-message {
            align-self: flex-end;
            background-color: #3b82f6;
            color: white;
            border-top-right-radius: 5px;
        }

        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .quick-action-btn {
            padding: 8px 14px;
            background-color: #f1f5f9;
            border: 1px solid #cbd5e1;
            border-radius: 20px;
            color: #475569;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-action-btn:hover {
            background-color: #e2e8f0;
            transform: translateY(-1px);
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
        }

        #chat-input {
            flex-grow: 1;
            padding: 14px 20px;
            border: 1px solid #cbd5e1;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
            background-color: white;
        }

        #chat-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .send-btn {
            padding: 14px 25px;
            border: none;
            border-radius: 10px;
            background-color: #3b82f6;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .send-btn:hover {
            background-color: #2563eb;
            transform: translateY(-2px);
        }

        /* Quiz Section */
        .quiz-section {
            background-color: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .quiz-section:hover {
            transform: translateY(-5px);
        }

        .quiz-logo {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            background-color: #8b5cf6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            margin: 0 auto 20px;
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.25);
        }

        .quiz-logo i {
            animation: float 3s ease-in-out infinite;
        }

        .quiz-intro h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 24px;
            color: #1e293b;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .quiz-intro p {
            color: #64748b;
            margin-bottom: 25px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .quiz-features {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .feature-badge {
            padding: 8px 16px;
            background-color: #f1f5f9;
            border-radius: 20px;
            font-size: 13px;
            color: #475569;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .feature-badge i {
            color: #3b82f6;
        }

        /* Quiz Modal */
        .quiz-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 20px;
        }

        .quiz-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .quiz-container {
            width: 100%;
            max-width: 600px;
            background-color: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            color: #64748b;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background-color: #e2e8f0;
            transform: rotate(90deg);
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .quiz-header .quiz-logo {
            width: 60px;
            height: 60px;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .quiz-title {
            font-family: 'Poppins', sans-serif;
            font-size: 26px;
            color: #1e293b;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .quiz-subtitle {
            color: #64748b;
            font-size: 15px;
            margin-bottom: 20px;
        }

        .quiz-progress-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
        }

        .quiz-progress-bar {
            flex-grow: 1;
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin: 0 15px;
        }

        .quiz-progress-fill {
            height: 100%;
            background-color: #8b5cf6;
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 4px;
        }

        .quiz-question-count {
            font-weight: 600;
            color: #8b5cf6;
            font-size: 16px;
            white-space: nowrap;
        }

        .quiz-content {
            margin-bottom: 30px;
        }

        .quiz-question {
            font-size: 20px;
            color: #1e293b;
            margin-bottom: 25px;
            font-weight: 600;
            line-height: 1.4;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .quiz-option {
            padding: 18px 22px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: white;
        }

        .quiz-option:hover {
            border-color: #8b5cf6;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.1);
        }

        .quiz-option.selected {
            border-color: #8b5cf6;
            background-color: rgba(139, 92, 246, 0.05);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.1);
        }

        .option-text {
            font-size: 15px;
            font-weight: 500;
            color: #1e293b;
        }

        .option-check {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 2px solid #cbd5e1;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .quiz-option.selected .option-check {
            background-color: #8b5cf6;
            border-color: #8b5cf6;
            color: white;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
        }

        /* Results Screen */
        .results-container {
            text-align: center;
            padding: 10px 0;
            animation: fadeIn 0.5s ease;
        }

        .results-title {
            font-size: 28px;
            margin-bottom: 20px;
            color: #1e293b;
            font-weight: 700;
        }

        .depression-level {
            font-size: 26px;
            padding: 15px 40px;
            border-radius: 50px;
            display: inline-block;
            margin: 20px 0;
            font-weight: 700;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }

        .level-low {
            background-color: #10b981;
            color: white;
        }

        .level-moderate {
            background-color: #f59e0b;
            color: white;
        }

        .level-high {
            background-color: #ef4444;
            color: white;
        }

        .result-description {
            max-width: 500px;
            margin: 0 auto 25px;
            font-size: 16px;
            color: #64748b;
            line-height: 1.6;
        }

        .result-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        /* Redirect Button */
        .redirect-section {
            text-align: center;
            padding: 20px;
        }

        .redirect-btn {
            padding: 18px 45px;
            font-size: 18px;
            border: none;
            border-radius: 12px;
            background-color: #3b82f6;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.25);
        }

        .redirect-btn:hover {
            background-color: #2563eb;
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(59, 130, 246, 0.35);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        @keyframes recording {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .main-layout {
                gap: 20px;
            }
            
            .camera-container {
                height: 250px;
            }
            
            .chatbot-conversation {
                height: 220px;
            }
            
            .quiz-container {
                padding: 20px;
            }
            
            .quiz-question {
                font-size: 18px;
            }
            
            .redirect-btn {
                width: 100%;
                justify-content: center;
                padding: 16px;
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            .logo-text h1 {
                font-size: 24px;
            }
            
            .camera-controls {
                flex-direction: column;
                gap: 15px;
            }
            
            .quiz-features {
                flex-direction: column;
                align-items: center;
            }
            
            .result-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-heartbeat"></i>
                </div>
                <div class="logo-text">
                    <h1>Healmate</h1>
                    <p>Your Mental Wellness Companion</p>
                </div>
            </div>
            <div class="user-info">
                <div class="user-avatar">
                    AJ
                </div>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Camera Section -->
            <section class="camera-section">
                <div class="section-title">
                    <div class="section-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <h2>Emotion Detection</h2>
                </div>
                <div class="camera-container" id="camera-container">
                    <video id="camera-feed" autoplay playsinline></video>
                    <div class="camera-overlay" id="camera-overlay">
                        <i class="fas fa-camera fa-3x" style="margin-bottom: 10px;"></i>
                        <h3 style="margin-bottom: 5px;">Camera is Off</h3>
                        <p>Click "Start Camera" to begin</p>
                    </div>
                </div>
                <div class="camera-controls">
                    <div class="mood-display">
                        <div class="mood-emoji" id="mood-emoji">üò¥</div>
                        <div class="mood-text">Mood: <span id="mood-text">Not detected</span></div>
                    </div>
                    <div class="camera-buttons">
                        <button class="btn btn-primary" id="start-camera">
                            <i class="fas fa-play-circle"></i> Start
                        </button>
                        <button class="btn btn-secondary" id="stop-camera" disabled>
                            <i class="fas fa-stop-circle"></i> Stop
                        </button>
                    </div>
                </div>
            </section>

            <!-- Chatbot Section -->
            <section class="chatbot-section">
                <div class="chatbot-header">
                    <div class="chatbot-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="chatbot-info">
                        <h3>Healmate Assistant</h3>
                        <p><i class="fas fa-circle" style="color: #10b981; font-size: 8px;"></i> Online ‚Ä¢ Voice Enabled</p>
                    </div>
                </div>
                
                <div class="voice-controls">
                    <button class="voice-btn" id="start-voice">
                        <i class="fas fa-microphone"></i> Start Voice
                    </button>
                    <button class="voice-btn" id="stop-voice" disabled>
                        <i class="fas fa-stop"></i> Stop Voice
                    </button>
                    <div class="voice-status" id="voice-status">Click to start voice chat</div>
                </div>
                
                <div class="chatbot-conversation" id="chat-conversation">
                    <div class="message bot-message">
                        Hello! I'm your Healmate assistant. You can talk to me by clicking the voice button or type below. How are you feeling today?
                        <div class="quick-actions">
                            <button class="quick-action-btn" data-message="I'm feeling good">
                                üòä I'm feeling good
                            </button>
                            <button class="quick-action-btn" data-message="I'm feeling okay">
                                üòê I'm feeling okay
                            </button>
                            <button class="quick-action-btn" data-message="I'm not feeling great">
                                üòî I'm not feeling great
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <input type="text" id="chat-input" placeholder="Type your message or use voice chat...">
                    <button class="send-btn" id="send-btn">
                        <i class="fas fa-paper-plane"></i> Send
                    </button>
                </div>
            </section>
        </div>

        <!-- Quiz Section -->
        <section class="quiz-section">
            <div class="quiz-logo">
                <i class="fas fa-brain"></i>
            </div>
            <div class="quiz-intro">
                <h2>Mental Wellness Assessment</h2>
                <p>Take our quick psychological quiz to understand your current mental state. The quiz is gamified with interactive elements and provides personalized insights.</p>
                
                <div class="quiz-features">
                    <div class="feature-badge">
                        <i class="fas fa-clock"></i> 5 minutes
                    </div>
                    <div class="feature-badge">
                        <i class="fas fa-gamepad"></i> Gamified
                    </div>
                    <div class="feature-badge">
                        <i class="fas fa-chart-bar"></i> Personalized Results
                    </div>
                </div>
                
                <button class="btn btn-primary" id="start-quiz-btn" style="padding: 15px 40px; font-size: 16px;">
                    <i class="fas fa-play"></i> Start Quiz
                </button>
            </div>
        </section>

        <!-- Quiz Modal -->
        <div class="quiz-modal" id="quiz-modal">
            <div class="quiz-container">
                <div class="close-modal" id="close-modal">
                    <i class="fas fa-times"></i>
                </div>
                
                <div class="quiz-header">
                    <div class="quiz-logo">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h2 class="quiz-title">Mental Wellness Quiz</h2>
                    <p class="quiz-subtitle">Answer honestly for accurate results</p>
                </div>
                
                <div class="quiz-progress-container">
                    <div class="quiz-question-count">Question: <span id="current-question">1</span>/8</div>
                    <div class="quiz-progress-bar">
                        <div class="quiz-progress-fill" id="quiz-progress"></div>
                    </div>
                    <div class="quiz-question-count">Score: <span id="quiz-score">0</span></div>
                </div>
                
                <div class="quiz-content" id="quiz-content">
                    <!-- Quiz content loaded here -->
                </div>
                
                <div class="quiz-navigation">
                    <button class="btn" id="prev-btn" disabled style="background-color: #f1f5f9; color: #475569;">
                        <i class="fas fa-arrow-left"></i> Previous
                    </button>
                    <button class="btn btn-primary" id="next-btn">
                        Next <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

<!-- Redirect Button -->
<div class="redirect-section">
    <a href="index.html">
        <button class="redirect-btn">
            <i class="fas fa-robot"></i> Go to Virtual Assistant ...
        </button>
    </a>
</div>


</a>

        </div>
    </div>

    <script>
        // Speech Synthesis (Text-to-Speech)
        const speechSynthesis = window.speechSynthesis;
        let currentVoice = null;
        
        // Initialize voices
        function initVoices() {
            // Wait for voices to load
            setTimeout(() => {
                const voices = speechSynthesis.getVoices();
                // Prefer a female English voice
                currentVoice = voices.find(voice => 
                    voice.lang.includes('en') && 
                    (voice.name.includes('Female') || voice.name.includes('Samantha') || voice.name.includes('Google UK English Female'))
                ) || voices[0];
            }, 500);
        }
        
        // Speak text
        function speakText(text) {
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }
            
            const utterance = new SpeechSynthesisUtterance(text);
            if (currentVoice) {
                utterance.voice = currentVoice;
            }
            utterance.rate = 1.0;
            utterance.pitch = 1.0;
            utterance.volume = 1.0;
            
            utterance.onstart = () => {
                console.log('Speaking:', text);
            };
            
            utterance.onend = () => {
                console.log('Finished speaking');
            };
            
            speechSynthesis.speak(utterance);
        }
        
        // Initialize voices when page loads
        window.addEventListener('load', initVoices);
        speechSynthesis.onvoiceschanged = initVoices;

        // Speech Recognition (Speech-to-Text)
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition = null;
        let isListening = false;
        
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';
            
            recognition.onstart = () => {
                isListening = true;
                updateVoiceUI(true);
            };
            
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                addMessage(transcript, true);
                processVoiceInput(transcript);
            };
            
            recognition.onend = () => {
                isListening = false;
                updateVoiceUI(false);
            };
            
            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                isListening = false;
                updateVoiceUI(false);
                document.getElementById('voice-status').textContent = 'Error: ' + event.error;
            };
        }

        // Voice UI controls
        function updateVoiceUI(listening) {
            const startBtn = document.getElementById('start-voice');
            const stopBtn = document.getElementById('stop-voice');
            const status = document.getElementById('voice-status');
            
            if (listening) {
                startBtn.disabled = true;
                stopBtn.disabled = false;
                startBtn.classList.add('recording');
                status.textContent = 'Listening... Speak now';
                status.style.color = '#ef4444';
            } else {
                startBtn.disabled = false;
                stopBtn.disabled = true;
                startBtn.classList.remove('recording');
                status.textContent = 'Click to start voice chat';
                status.style.color = '#64748b';
            }
        }

        // Camera functionality
        const cameraFeed = document.getElementById('camera-feed');
        const startCameraBtn = document.getElementById('start-camera');
        const stopCameraBtn = document.getElementById('stop-camera');
        const moodEmoji = document.getElementById('mood-emoji');
        const moodText = document.getElementById('mood-text');
        const cameraContainer = document.getElementById('camera-container');
        const cameraOverlay = document.getElementById('camera-overlay');
        let mediaStream = null;
        let emotionInterval = null;

        // Start camera
        startCameraBtn.addEventListener('click', async () => {
            try {
                mediaStream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        facingMode: 'user' 
                    } 
                });
                
                cameraFeed.srcObject = mediaStream;
                cameraOverlay.style.display = 'none';
                startCameraBtn.disabled = true;
                stopCameraBtn.disabled = false;
                moodText.textContent = 'Analyzing...';
                moodEmoji.textContent = 'ü§î';
                
                // Simulate emotion detection
                emotionInterval = setInterval(() => {
                    const emotions = [
                        {emoji: 'üòä', mood: 'Happy'},
                        {emoji: 'üòå', mood: 'Calm'},
                        {emoji: 'üòê', mood: 'Neutral'},
                        {emoji: 'üòî', mood: 'Sad'},
                        {emoji: 'üò∞', mood: 'Anxious'}
                    ];
                    const randomEmotion = emotions[Math.floor(Math.random() * emotions.length)];
                    moodEmoji.textContent = randomEmotion.emoji;
                    moodText.textContent = randomEmotion.mood;
                }, 3000);
                
            } catch (error) {
                console.error('Camera error:', error);
                moodText.textContent = 'Camera error';
                moodEmoji.textContent = '‚ùå';
            }
        });

        // Stop camera
        stopCameraBtn.addEventListener('click', () => {
            if (mediaStream) {
                mediaStream.getTracks().forEach(track => track.stop());
                cameraFeed.srcObject = null;
                                cameraOverlay.style.display = 'flex';
                startCameraBtn.disabled = false;
                stopCameraBtn.disabled = true;
                moodText.textContent = 'Not detected';
                moodEmoji.textContent = 'üò¥';
                
                if (emotionInterval) {
                    clearInterval(emotionInterval);
                }
            }
        });

        // Voice chat functionality
        const startVoiceBtn = document.getElementById('start-voice');
        const stopVoiceBtn = document.getElementById('stop-voice');
        
        startVoiceBtn.addEventListener('click', () => {
            if (recognition && !isListening) {
                recognition.start();
                addMessage("I'm listening... Speak now.", false);
                speakText("I'm listening. Please speak now.");
            }
        });
        
        stopVoiceBtn.addEventListener('click', () => {
            if (recognition && isListening) {
                recognition.stop();
            }
        });

        // Process voice input
        function processVoiceInput(transcript) {
            transcript = transcript.toLowerCase().trim();
            console.log("Voice input:", transcript);
            
            // Process different voice commands
            if (transcript.includes('quiz') || transcript.includes('assessment') || transcript.includes('test')) {
                setTimeout(() => {
                    speakText("I'll start the mental wellness quiz for you.");
                    openQuiz();
                }, 800);
            } else if (transcript.includes('camera') || transcript.includes('emotion')) {
                if (transcript.includes('start') || transcript.includes('on')) {
                    startCameraBtn.click();
                    speakText("Starting the emotion detection camera.");
                } else if (transcript.includes('stop') || transcript.includes('off')) {
                    stopCameraBtn.click();
                    speakText("Stopping the emotion detection camera.");
                }
            } else if (transcript.includes('hello') || transcript.includes('hi')) {
                setTimeout(() => {
                    const response = "Hello! How can I help you today?";
                    addMessage(response, false);
                    speakText(response);
                }, 800);
            } else if (transcript.includes('how are you')) {
                setTimeout(() => {
                    const response = "I'm doing well, thank you for asking! How are you feeling today?";
                    addMessage(response, false);
                    speakText(response);
                }, 800);
            } else if (transcript.includes('depressed') || transcript.includes('sad') || transcript.includes('anxious')) {
                setTimeout(() => {
                    const response = "I'm sorry to hear that. Would you like to try our mental wellness quiz to better understand how you're feeling?";
                    addMessage(response, false);
                    speakText(response);
                }, 800);
            } else if (transcript.includes('thank you') || transcript.includes('thanks')) {
                setTimeout(() => {
                    const response = "You're welcome! I'm always here to help.";
                    addMessage(response, false);
                    speakText(response);
                }, 800);
            } else {
                // Default response for other inputs
                setTimeout(() => {
                    const responses = [
                        "I understand. How does that make you feel?",
                        "Thank you for sharing that with me.",
                        "That's interesting. Tell me more about that.",
                        "I'm here to listen. How can I support you?",
                        "Would you like to try our mental wellness assessment?"
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addMessage(randomResponse, false);
                    speakText(randomResponse);
                }, 800);
            }
        }

        // Chatbot functionality
        const chatConversation = document.getElementById('chat-conversation');
        const chatInput = document.getElementById('chat-input');
        const sendBtn = document.getElementById('send-btn');

        // Bot responses
        const botResponses = [
            "Thanks for sharing. I'm here to listen. How has your day been so far?",
            "I understand. It's okay to feel that way sometimes. Would you like to talk more about it?",
            "That's great to hear! Positive moods can really improve our day. What contributed to your good mood?",
            "I appreciate you sharing that with me. Remember that it's okay to have ups and downs. Is there anything specific on your mind?",
            "Thank you for being open. Would you like to try a relaxation exercise or continue talking?"
        ];

        // Add a message to the conversation
        function addMessage(message, isUser = false, quickActions = null) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(isUser ? 'user-message' : 'bot-message');
            
            // Add microphone icon for voice messages
            if (isUser && recognition) {
                messageDiv.innerHTML = `<i class="fas fa-microphone" style="margin-right: 8px; font-size: 12px;"></i>${message}`;
            } else {
                messageDiv.textContent = message;
            }
            
            if (quickActions && !isUser) {
                const actionsDiv = document.createElement('div');
                actionsDiv.classList.add('quick-actions');
                quickActions.forEach(action => {
                    const button = document.createElement('button');
                    button.classList.add('quick-action-btn');
                    button.textContent = action.text;
                    button.dataset.message = action.text;
                    actionsDiv.appendChild(button);
                });
                messageDiv.appendChild(actionsDiv);
            }
            
            chatConversation.appendChild(messageDiv);
            chatConversation.scrollTop = chatConversation.scrollHeight;
            
            // Speak bot messages
            if (!isUser && !message.includes("I'm listening")) {
                speakText(message);
            }
        }

        // Send message function
        function sendMessage() {
            const message = chatInput.value.trim();
            if (message) {
                addMessage(message, true);
                chatInput.value = '';
                
                // Simulate bot response after a short delay
                setTimeout(() => {
                    const randomResponse = botResponses[Math.floor(Math.random() * botResponses.length)];
                    addMessage(randomResponse, false);
                }, 1000);
            }
        }

        // Quick action button handler
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('quick-action-btn')) {
                const message = e.target.dataset.message;
                addMessage(message, true);
                
                // Handle specific quick actions
                if (message.includes("good") || message.includes("okay") || message.includes("great")) {
                    setTimeout(() => {
                        const response = "That's wonderful to hear! Maintaining positive mental health is important. Would you like to take our wellness quiz to learn more about your mental state?";
                        addMessage(response, false);
                        speakText(response);
                    }, 1000);
                } else if (message.includes("not feeling great")) {
                    setTimeout(() => {
                        const response = "I'm sorry to hear that. It's completely normal to have difficult days. Would you like to try our mental wellness assessment to better understand your feelings?";
                        addMessage(response, false);
                        speakText(response);
                    }, 1000);
                } else {
                    // Generic response for other quick actions
                    setTimeout(() => {
                        const randomResponse = botResponses[Math.floor(Math.random() * botResponses.length)];
                        addMessage(randomResponse, false);
                        speakText(randomResponse);
                    }, 1000);
                }
            }
        });

        // Event listeners for chat
        sendBtn.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Quiz functionality
        const quizModal = document.getElementById('quiz-modal');
        const closeModal = document.getElementById('close-modal');
        const quizContent = document.getElementById('quiz-content');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const quizProgress = document.getElementById('quiz-progress');
        const quizScoreElement = document.getElementById('quiz-score');
        const currentQuestionElement = document.getElementById('current-question');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        
        // Psychological questions for depression assessment
        const quizQuestions = [
            {
                question: "Over the past two weeks, how often have you felt down, depressed, or hopeless?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                question: "How often have you had little interest or pleasure in doing things?",
                options: [
                    { text: "Not at all", score: 0 },
                    { text: "Several days", score: 1 },
                    { text: "More than half the days", score: 2 },
                    { text: "Nearly every day", score: 3 }
                ]
            },
            {
                question: "How is your sleep pattern?",
                options: [
                    { text: "I sleep well and feel rested", score: 0 },
                    { text: "I sometimes have trouble sleeping", score: 1 },
                    { text: "I often have trouble falling or staying asleep", score: 2 },
                    { text: "I hardly sleep or sleep too much almost every day", score: 3 }
                ]
            },
            {
                question: "How is your energy level?",
                options: [
                    { text: "I have normal energy levels", score: 0 },
                    { text: "I feel tired sometimes", score: 1 },
                    { text: "I feel tired more than half the time", score: 2 },
                    { text: "I feel tired or have little energy nearly every day", score: 3 }
                ]
            },
            {
                question: "How is your appetite?",
                options: [
                    { text: "My appetite is normal", score: 0 },
                    { text: "My appetite is slightly decreased/increased", score: 1 },
                    { text: "My appetite is significantly decreased/increased", score: 2 },
                    { text: "I have no appetite or overeat nearly every day", score: 3 }
                ]
            },
            {
                question: "How do you feel about yourself?",
                options: [
                    { text: "I feel good about myself", score: 0 },
                    { text: "I am somewhat self-critical", score: 1 },
                    { text: "I often feel like a failure or have let myself/others down", score: 2 },
                    { text: "I hate myself or feel worthless nearly every day", score: 3 }
                ]
            },
            {
                question: "How is your ability to concentrate?",
                options: [
                    { text: "I can concentrate well", score: 0 },
                    { text: "I sometimes have trouble concentrating", score: 1 },
                    { text: "I often have trouble focusing on things", score: 2 },
                    { text: "I can't concentrate at all nearly every day", score: 3 }
                ]
            },
            {
                question: "Have you had thoughts of harming yourself?",
                options: [
                    { text: "Never", score: 0 },
                    { text: "Rarely, but not seriously", score: 1 },
                    { text: "Several times with some intent", score: 2 },
                    { text: "Frequently with a specific plan", score: 3 }
                ]
            }
        ];

        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizQuestions.length).fill(null);
        let totalScore = 0;

        // Open quiz modal
        function openQuiz() {
            quizModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            currentQuestionIndex = 0;
            userAnswers.fill(null);
            totalScore = 0;
            quizScoreElement.textContent = '0';
            loadQuestion(currentQuestionIndex);
            
            // Speak quiz instruction
            speakText("Welcome to the mental wellness quiz. Answer each question honestly for the most accurate results.");
            
            // Add message to chatbot about quiz starting
            addMessage("I've started the mental wellness assessment for you. Answer the questions honestly for the best results!", false);
        }

        // Close quiz modal
        function closeQuiz() {
            quizModal.classList.remove('active');
            document.body.style.overflow = 'auto';
            speakText("Quiz closed.");
        }

        // Event listeners for quiz
        startQuizBtn.addEventListener('click', openQuiz);
        closeModal.addEventListener('click', closeQuiz);

        // Close modal when clicking outside
        quizModal.addEventListener('click', (e) => {
            if (e.target === quizModal) {
                closeQuiz();
            }
        });

        // Initialize quiz
        function loadQuestion(index) {
            quizContent.innerHTML = '';
            currentQuestionElement.textContent = index + 1;
            
            const question = quizQuestions[index];
            
            // Create question element
            const questionElement = document.createElement('div');
            questionElement.classList.add('quiz-question');
            questionElement.textContent = question.question;
            quizContent.appendChild(questionElement);
            
            // Speak the question
            speakText(`Question ${index + 1}: ${question.question}`);
            
            // Create options container
            const optionsContainer = document.createElement('div');
            optionsContainer.classList.add('quiz-options');
            
            // Create option elements
            question.options.forEach((option, optionIndex) => {
                const optionElement = document.createElement('div');
                optionElement.classList.add('quiz-option');
                if (userAnswers[index] === optionIndex) {
                    optionElement.classList.add('selected');
                }
                
                optionElement.innerHTML = `
                    <span class="option-text">${option.text}</span>
                    <div class="option-check">
                        ${userAnswers[index] === optionIndex ? '<i class="fas fa-check"></i>' : ''}
                    </div>
                `;
                
                optionElement.addEventListener('click', () => {
                    selectOption(index, optionIndex, option.score);
                    // Speak the selected option
                    speakText(`You selected: ${option.text}`);
                });
                
                optionsContainer.appendChild(optionElement);
            });
            
            quizContent.appendChild(optionsContainer);
            
            // Update progress bar
            const progressPercentage = ((index + 1) / quizQuestions.length) * 100;
            quizProgress.style.width = `${progressPercentage}%`;
            
            // Update buttons
            prevBtn.disabled = index === 0;
            nextBtn.textContent = index === quizQuestions.length - 1 ? 'See Results' : 'Next Question';
        }

        // Select an option
        function selectOption(questionIndex, optionIndex, score) {
            // Update user answer
            userAnswers[questionIndex] = optionIndex;
            
            // Update total score
            totalScore = 0;
            userAnswers.forEach((answer, idx) => {
                if (answer !== null) {
                    totalScore += quizQuestions[idx].options[answer].score;
                }
            });
            
            // Update UI
            quizScoreElement.textContent = totalScore;
            loadQuestion(currentQuestionIndex);
        }

        // Navigate to next question
        nextBtn.addEventListener('click', () => {
            if (userAnswers[currentQuestionIndex] === null) {
                speakText("Please select an answer before proceeding.");
                return;
            }
            
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
            } else {
                showResults();
            }
        });

        // Navigate to previous question
        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion(currentQuestionIndex);
            }
        });

        // Show quiz results
        function showResults() {
            // Calculate depression level based on total score
            let depressionLevel, levelClass, description;
            
            if (totalScore <= 4) {
                depressionLevel = "Low";
                levelClass = "level-low";
                description = "Your responses suggest minimal depressive symptoms. This is a positive sign for your mental wellness. Continue practicing self-care and mindfulness to maintain your mental health.";
            } else if (totalScore <= 9) {
                depressionLevel = "Moderate";
                levelClass = "level-moderate";
                description = "Your responses indicate moderate depressive symptoms. It might be helpful to speak with a mental health professional or try some wellness exercises. Remember that seeking help is a sign of strength.";
            } else {
                depressionLevel = "High";
                levelClass = "level-high";
                description = "Your responses suggest significant depressive symptoms. We strongly recommend speaking with a mental health professional. Your wellbeing is important, and support is available.";
            }
            
            quizContent.innerHTML = `
                <div class="results-container">
                    <h2 class="results-title">Assessment Complete</h2>
                    <p class="result-description">Based on your responses to ${quizQuestions.length} psychological questions, here is your assessment:</p>
                    <div class="depression-level ${levelClass}">Depression Level: ${depressionLevel}</div>
                    <p class="result-description">${description}</p>
                    <p class="result-description">Your total score: <strong>${totalScore}</strong> out of a possible ${quizQuestions.length * 3}</p>
                    <div class="result-actions">
                        <button class="btn" id="retake-btn" style="background-color: #f1f5f9; color: #475569;">
                            <i class="fas fa-redo"></i> Retake
                        </button>
                        <button class="btn btn-primary" id="close-results-btn">
                            <i class="fas fa-check"></i> Done
                        </button>
                    </div>
                </div>
            `;
            
            // Hide navigation buttons
            prevBtn.style.display = 'none';
            nextBtn.style.display = 'none';
            
            // Speak results
            speakText(`Your assessment is complete. Your depression level is ${depressionLevel.toLowerCase()}. ${description}`);
            
            // Add retake button functionality
            document.getElementById('retake-btn').addEventListener('click', retakeQuiz);
            document.getElementById('close-results-btn').addEventListener('click', closeQuiz);
            
            // Send results to chatbot
            setTimeout(() => {
                addMessage(`I've completed analyzing your assessment. Your depression level is ${depressionLevel.toLowerCase()}. ${description}`, false);
                speakText(`I've sent your results to the chat. Your depression level is ${depressionLevel.toLowerCase()}.`);
            }, 500);
        }

        // Retake quiz function
        function retakeQuiz() {
            currentQuestionIndex = 0;
            userAnswers = new Array(quizQuestions.length).fill(null);
            totalScore = 0;
            quizScoreElement.textContent = '0';
            
            // Show navigation buttons again
            prevBtn.style.display = 'flex';
            nextBtn.style.display = 'flex';
            
            loadQuestion(currentQuestionIndex);
            speakText("Let's restart the quiz. Answer each question honestly.");
        }

        // Redirect button functionality
        document.getElementById('redirect-btn').addEventListener('click', () => {
            const redirectBtn = document.getElementById('redirect-btn');
            const originalText = redirectBtn.innerHTML;
            redirectBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Redirecting...';
            redirectBtn.disabled = true;
            
            speakText("Redirecting you to the virtual assistant.");
            
            setTimeout(() => {
                // In a real implementation, this would redirect to virtual_assist.html
                // For this demo, we'll simulate it
                addMessage("Welcome to your Virtual Assistant! I'm here to provide you with personalized mental wellness support, mindfulness exercises, and helpful resources.", false);
                speakText("Welcome to your Virtual Assistant! I'm here to provide you with personalized mental wellness support.");
                
                // Reset the button
                redirectBtn.innerHTML = originalText;
                redirectBtn.disabled = false;
            }, 2000);
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl + Space to start/stop voice
            if (e.ctrlKey && e.code === 'Space') {
                e.preventDefault();
                if (isListening) {
                    stopVoiceBtn.click();
                } else {
                    startVoiceBtn.click();
                }
            }
            
            // Escape to close quiz
            if (e.code === 'Escape' && quizModal.classList.contains('active')) {
                closeQuiz();
            }
        });

        // Initialize the page
        window.addEventListener('DOMContentLoaded', () => {
            // Add welcome message after a short delay
            setTimeout(() => {
                addMessage("Welcome to Healmate! I'm your voice-enabled assistant. You can talk to me by clicking the microphone button or typing below. How are you feeling today?", false, [
                    {text: "üòä I'm feeling good"},
                    {text: "üòê I'm feeling okay"},
                    {text: "üòî I'm not feeling great"}
                ]);
                speakText("Welcome to Healmate! I'm your voice enabled assistant. You can talk to me by clicking the microphone button or typing below. How are you feeling today?");
            }, 1000);
            
            // Check if browser supports speech recognition
            if (!SpeechRecognition) {
                document.getElementById('voice-status').textContent = 'Voice not supported in this browser';
                startVoiceBtn.disabled = true;
                startVoiceBtn.style.backgroundColor = '#9ca3af';
            }
        });
    </script>
</body>
</html>
